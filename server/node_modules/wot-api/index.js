var errorResponse = require("./response/error.js");
var httpClient = require("request");

var WotApi = {
    host: "",
    application_id: "",
    url: "",
    form: {},
    go: function(callback) {
        this.form.application_id = this.application_id;
        httpClient.post(this.url, {form: this.form}, function (error, response, body){
            if (!error && response.statusCode == 200) {
                callback(JSON.parse(body));
            } else {
                callback(errorResponse(error.message));
            }
        });
    },
    clan: function(id, callback) {
        this.url = this.host + "/clan/info/";
        this.form = {clan_id: id};
        this.go(callback);
    },
    account: function(id, callback) {
        this.url = this.host + "/account/info/";
        this.form = {account_id: id};
        this.go(callback);
    }

}
module.exports = WotApi;